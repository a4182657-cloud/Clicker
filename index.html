<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Telegram Stars Clicker</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#0e0f14;
  --card:#1b1d25;
  --text:#fff;
  --accent:#ffd54f;
  --danger:#ff6b6b;
  --gray:#777;
}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:'Inter',system-ui,sans-serif;
  padding-bottom:90px;
}
.app{padding:14px;}

.top{
  display:flex;
  justify-content:space-between;
  gap:10px;
}

.balance-box,.level-box{
  border:2px solid var(--accent);
  border-radius:12px;
  padding:6px 12px;
  font-weight:600;
}

.screen{display:none;}
.screen.active{display:block;}

.clicker{text-align:center;margin-top:20px;}

.click-btn{
  width:240px;height:240px;
  border-radius:50%;
  border:none;
  font-size:64px;
  background:radial-gradient(circle,#ffe082,#ffca28);
  transition:.15s;
}
.click-btn:active{transform:scale(.92);}
.click-btn.disabled{
  background:#444;
  color:#999;
  box-shadow:none;
}
.star-glow{box-shadow:0 0 25px rgba(255,215,79,.8);}

.upgrade-box{
  margin-top:18px;
  padding:14px;
  background:#14161d;
  border-radius:14px;
}

button{
  background:var(--accent);
  border:none;
  border-radius:10px;
  padding:10px 14px;
  font-size:14px;
  font-weight:600;
}
button:disabled{
  background:#555;
  color:#aaa;
}

.cards{
  display:flex;
  flex-direction:column;
  gap:12px;
}
.card{
  background:var(--card);
  padding:12px;
  border-radius:12px;
  text-align:center;
}
.common{border:2px solid #9e9e9e;}
.rare{border:2px solid #4fc3f7;}
.epic{border:2px solid #ba68c8;}
.legendary{
  border:2px solid #ffd54f;
  box-shadow:0 0 12px #ffd54f;
}

.menu{
  position:fixed;
  bottom:0;left:0;right:0;
  display:flex;
  background:#111;
}
.menu button{
  flex:1;
  background:none;
  color:white;
  font-size:18px;
  padding:14px 0;
}
</style>
</head>

<body>

<div class="app">
  <div class="top">
    <div class="balance-box">‚≠ê <span id="coins">0</span></div>
    <div class="level-box">–£—Ä. <span id="level">1</span></div>
  </div>

  <!-- CLICK -->
  <div id="screen-click" class="screen active">
    <div class="clicker">
      <button id="clickBtn" class="click-btn" onclick="clickCoin()">‚≠ê</button>

      <p>‚ö° –≠–Ω–µ—Ä–≥–∏—è: <b><span id="energy">0</span> / <span id="maxEnergy">0</span></b></p>
      <p>–°–∏–ª–∞ –∫–ª–∏–∫–∞: <b><span id="clickPower">1</span></b></p>

      <div class="upgrade-box">
        <div>–¶–µ–Ω–∞ —É–ª—É—á—à–µ–Ω–∏—è –∫–ª–∏–∫–∞: ‚≠ê <span id="clickPrice">0</span></div>
        <button onclick="upgradeClick()">–£–ª—É—á—à–∏—Ç—å –∫–ª–∏–∫</button>
      </div>

      <div class="upgrade-box">
        <div>–¶–µ–Ω–∞ —É–ª—É—á—à–µ–Ω–∏—è —ç–Ω–µ—Ä–≥–∏–∏: ‚≠ê <span id="energyPrice">0</span></div>
        <button onclick="upgradeEnergy()">–£–ª—É—á—à–∏—Ç—å —ç–Ω–µ—Ä–≥–∏—é</button>
      </div>
    </div>
  </div>

  <!-- CARDS -->
  <div id="screen-cards" class="screen">
    <h3>üéÅ NFT –ü–æ–¥–∞—Ä–∫–∏</h3>
    <div id="cards" class="cards"></div>
  </div>
</div>

<div class="menu">
  <button onclick="showScreen('click')">üñ±</button>
  <button onclick="showScreen('cards')">üéÅ</button>
</div>

<script>
Telegram.WebApp.expand()

const player={
  coins:0,
  totalEarned:0,
  level:1,
  clickPower:1,
  clickLevel:1,
  energy:500,
  maxEnergy:500,
  energyLevel:1
}

const cardData=[
{id:1,name:"Common Gift",basePrice:500,income:2,level:0,maxLevel:10,rarity:"common"},
{id:2,name:"Rare Gift",basePrice:2500,income:8,level:0,maxLevel:10,rarity:"rare"},
{id:3,name:"Epic Gift",basePrice:12000,income:25,level:0,maxLevel:10,rarity:"epic"},
{id:4,name:"Legendary Gift",basePrice:60000,income:100,level:0,maxLevel:10,rarity:"legendary"}
]

function updateLevel(){
  let xp=player.totalEarned,l=1,need=100
  while(xp>=need){
    xp-=need
    l++
    need=Math.floor(100*Math.pow(l,1.5))
  }
  player.level=l
}

function getStarByLevel(l){
  if(l>=60)return"üå†"
  if(l>=45)return"üí´"
  if(l>=30)return"‚ú®"
  if(l>=15)return"üåü"
  return"‚≠ê"
}

function clickCoin(){
  if(player.energy<=0) return
  player.energy--
  player.coins+=player.clickPower
  player.totalEarned+=player.clickPower
  updateLevel()
  renderStats()
}

function upgradeClick(){
  const price=Math.floor(50*Math.pow(1.4,player.clickLevel))
  if(player.coins<price)return
  player.coins-=price
  player.clickLevel++
  player.clickPower++
  renderStats()
}

function energyUpgradePrice(){
  return Math.floor(200*Math.pow(1.6,player.energyLevel))
}

function upgradeEnergy(){
  const price=energyUpgradePrice()
  if(player.coins<price)return
  player.coins-=price
  player.energyLevel++
  player.maxEnergy+=200
  player.energy=player.maxEnergy
  renderStats()
}

setInterval(()=>{
  if(player.energy<player.maxEnergy){
    player.energy++
    renderStats()
  }
},1000)

function showScreen(n){
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"))
  document.getElementById("screen-"+n).classList.add("active")
}

function renderStats(){
  coins.innerText=player.coins
  level.innerText=player.level
  clickPower.innerText=player.clickPower
  clickPrice.innerText=Math.floor(50*Math.pow(1.4,player.clickLevel))
  energy.innerText=player.energy
  maxEnergy.innerText=player.maxEnergy
  energyPrice.innerText=energyUpgradePrice()

  clickBtn.innerText=getStarByLevel(player.level)

  if(player.energy<=0){
    clickBtn.classList.add("disabled")
    clickBtn.disabled=true
  }else{
    clickBtn.classList.remove("disabled")
    clickBtn.disabled=false
  }
}

function renderCards(){
  cards.innerHTML=""
  cardData.forEach(c=>{
    const price=Math.floor(c.basePrice*Math.pow(1.5,c.level))
    const isMax=c.level>=c.maxLevel
    cards.innerHTML+=`
      <div class="card ${c.rarity}">
        <b>${c.name}</b><br>
        –£—Ä. ${c.level}/${c.maxLevel}<br>
        ‚≠ê ${c.level*c.income}/—Å–µ–∫<br>
        <button onclick="buyCard(${c.id})" ${isMax?"disabled":""}>
          ${isMax?"MAX":"–ö—É–ø–∏—Ç—å ("+price+")"}
        </button>
      </div>`
  })
}

function buyCard(id){
  const c=cardData.find(x=>x.id===id)
  if(c.level>=c.maxLevel)return
  const price=Math.floor(c.basePrice*Math.pow(1.5,c.level))
  if(player.coins<price)return
  player.coins-=price
  c.level++
  renderStats()
  renderCards()
}

renderStats()
renderCards()
</script>

</body>
</html>
