<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Telegram Stars Clicker</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#0e0f14;
  --card:#1b1d25;
  --text:#fff;
  --accent:#ffd54f;
  --danger:#ff6b6b;
}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:'Inter',system-ui,sans-serif;
  padding-bottom:90px;
}
.app{padding:14px;}

.top{
  display:flex;
  justify-content:space-between;
  gap:10px;
}

.balance-box{
  border:2px solid var(--accent);
  border-radius:12px;
  padding:6px 12px;
  font-weight:600;
}
.level-box{
  border:2px solid #555;
  border-radius:12px;
  padding:6px 12px;
  font-weight:600;
}

.screen{display:none;}
.screen.active{display:block;}

.clicker{text-align:center;margin-top:20px;}

.click-btn{
  width:240px;height:240px;
  border-radius:50%;
  border:none;
  font-size:64px;
  background:radial-gradient(circle,#ffe082,#ffca28);
  transition:.1s;
}
.click-btn:active{transform:scale(.92);}
.star-glow{box-shadow:0 0 25px rgba(255,215,79,.8);}

.upgrade-box{
  margin-top:18px;
  padding:14px;
  background:#14161d;
  border-radius:14px;
}

button{
  background:var(--accent);
  border:none;
  border-radius:10px;
  padding:10px 14px;
  font-size:14px;
  font-weight:600;
}
button:active{transform:scale(.95);}

.cards{
  display:flex;
  flex-direction:column;
  gap:12px;
}
.card{
  background:var(--card);
  padding:12px;
  border-radius:12px;
  text-align:center;
  position:relative;
}
.card.buy{animation:pulse .3s;}
.card.shake{animation:shake .3s;}

.card .error{
  color:var(--danger);
  font-size:12px;
  margin-top:6px;
}

.common{border:2px solid #9e9e9e;}
.rare{border:2px solid #4fc3f7;}
.epic{border:2px solid #ba68c8;}
.legendary{
  border:2px solid #ffd54f;
  box-shadow:0 0 12px #ffd54f;
}

.menu{
  position:fixed;
  bottom:0;left:0;right:0;
  display:flex;
  background:#111;
}
.menu button{
  flex:1;
  background:none;
  color:white;
  font-size:18px;
  padding:14px 0;
}

input{
  width:90%;
  padding:10px;
  border-radius:10px;
  border:none;
  margin-top:10px;
  font-size:16px;
}

@keyframes pulse{
  0%{transform:scale(1)}
  50%{transform:scale(1.1)}
  100%{transform:scale(1)}
}
@keyframes shake{
  0%{transform:translateX(0)}
  25%{transform:translateX(-5px)}
  50%{transform:translateX(5px)}
  75%{transform:translateX(-5px)}
  100%{transform:translateX(0)}
}
</style>
</head>

<body>

<div class="app">
  <div class="top">
    <div class="balance-box">‚≠ê <span id="coins">0</span></div>
    <div class="level-box">–£—Ä. <span id="level">1</span></div>
  </div>

  <!-- CLICK -->
  <div id="screen-click" class="screen active">
    <div class="clicker">
      <button id="clickBtn" class="click-btn" onclick="clickCoin()">‚≠ê</button>

      <p>–°–∏–ª–∞ –∫–ª–∏–∫–∞: <b><span id="clickPower">1</span></b></p>

      <div class="upgrade-box">
        <div>–¶–µ–Ω–∞ —É–ª—É—á—à–µ–Ω–∏—è: ‚≠ê <span id="clickPrice">50</span></div>
        <button onclick="upgradeClick()">–£–ª—É—á—à–∏—Ç—å –∫–ª–∏–∫</button>
      </div>
    </div>
  </div>

  <!-- CARDS -->
  <div id="screen-cards" class="screen">
    <h3>üéÅ NFT –ü–æ–¥–∞—Ä–∫–∏</h3>
    <div id="cards" class="cards"></div>
  </div>

  <!-- PROFILE -->
  <div id="screen-profile" class="screen">
    <h3>üìä –ü—Ä–æ—Ñ–∏–ª—å</h3>
    <p>–í—Å–µ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ: ‚≠ê <b><span id="totalEarned">0</span></b></p>
    <p>–î–æ—Ö–æ–¥ –≤ —Å–µ–∫—É–Ω–¥—É: ‚≠ê <b><span id="incomePerSec">0</span></b></p>
  </div>

  <!-- PROMO -->
  <div id="screen-promo" class="screen">
    <h3>üéü –ü—Ä–æ–º–æ–∫–æ–¥—ã</h3>
    <input id="promoInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥">
    <button onclick="redeemPromo()">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</button>
    <p id="promoMessage"></p>
  </div>
</div>

<div class="menu">
  <button onclick="showScreen('click')">üñ±</button>
  <button onclick="showScreen('cards')">üéÅ</button>
  <button onclick="showScreen('profile')">üìä</button>
  <button onclick="showScreen('promo')">üéü</button>
</div>

<script>
Telegram.WebApp.expand()

const player={
  coins:0,
  totalEarned:0,
  level:1,
  clickPower:1,
  clickLevel:1
}

const cardData=[
{id:1,name:"Common Box",basePrice:250,income:1,level:0,maxLevel:10,rarity:"common"},
{id:2,name:"Silver Gift",basePrice:1200,income:3,level:0,maxLevel:10,rarity:"rare"},
{id:3,name:"Golden Gift",basePrice:4500,income:8,level:0,maxLevel:10,rarity:"rare"},
{id:4,name:"Crystal Box",basePrice:12000,income:20,level:0,maxLevel:10,rarity:"epic",unlock:2},
{id:5,name:"Neon Gift",basePrice:30000,income:60,level:0,maxLevel:10,rarity:"epic",unlock:3},
{id:6,name:"Epic Drop",basePrice:80000,income:150,level:0,maxLevel:10,rarity:"epic",unlock:4},
{id:7,name:"Mythic Core",basePrice:200000,income:400,level:0,maxLevel:10,rarity:"legendary",unlock:5},
{id:8,name:"Legendary Star",basePrice:500000,income:1000,level:0,maxLevel:10,rarity:"legendary",unlock:6},
{id:9,name:"Divine Relic",basePrice:1200000,income:2500,level:0,maxLevel:10,rarity:"legendary",unlock:7},
{id:10,name:"Ultimate NFT",basePrice:5000000,income:10000,level:0,maxLevel:10,rarity:"legendary",unlock:8}
]

const promoCodes={
"STARS100K":true,"NFTGIFT":true,"TELEGRAM":true,"BONUSSTAR":true,"CLICKER":true,
"DROP2025":true,"NFTPOWER":true,"STARHYPE":true,"GIFTBOX":true,"ULTRASTAR":true
}

function incomePerSecond(){
  return cardData.reduce((s,c)=>s+c.level*c.income,0)
}

function updateLevel(){
  let xp=player.totalEarned,l=1,need=100
  while(xp>=need){xp-=need;l++;need=Math.floor(100*Math.pow(l,1.5))}
  player.level=l
}

function getStarByLevel(l){
  if(l>=60)return"üå†"
  if(l>=45)return"üí´"
  if(l>=30)return"‚ú®"
  if(l>=15)return"üåü"
  return"‚≠ê"
}

function clickCoin(){
  player.coins+=player.clickPower
  player.totalEarned+=player.clickPower
  updateLevel()
  renderStats()
}

function upgradeClick(){
  const price=Math.floor(50*Math.pow(1.4,player.clickLevel))
  if(player.coins<price)return
  player.coins-=price
  player.clickLevel++
  player.clickPower++
  renderStats()
}

function buyCard(id){
  const c=cardData.find(x=>x.id===id)
  const price=Math.floor(c.basePrice*Math.pow(1.5,c.level))
  const el=document.getElementById("card-"+id)

  if(player.coins<price){
    el.classList.add("shake")
    el.querySelector(".error").innerText="‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ ‚≠ê"
    setTimeout(()=>el.querySelector(".error").innerText="",1200)
    return
  }

  player.coins-=price
  c.level++
  el.classList.add("buy")
  setTimeout(()=>el.classList.remove("buy"),300)
  renderStats()
  renderCards()
}

function redeemPromo(){
  const code=promoInput.value.trim().toUpperCase()
  if(promoCodes[code]){
    promoCodes[code]=false
    player.coins+=100000
    player.totalEarned+=100000
    promoMessage.innerText="‚úÖ +100 000 ‚≠ê"
    renderStats()
  }else promoMessage.innerText="‚ùå –ö–æ–¥ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω"
  promoInput.value=""
}

setInterval(()=>{
  const inc=incomePerSecond()
  if(inc>0){
    player.coins+=inc
    player.totalEarned+=inc
    updateLevel()
    renderStats()
  }
},1000)

function showScreen(n){
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"))
  document.getElementById("screen-"+n).classList.add("active")
}

function renderStats(){
  coins.innerText=player.coins
  level.innerText=player.level
  clickPower.innerText=player.clickPower
  clickPrice.innerText=Math.floor(50*Math.pow(1.4,player.clickLevel))
  totalEarned.innerText=player.totalEarned
  incomePerSec.innerText=incomePerSecond()
  clickBtn.innerText=getStarByLevel(player.level)
  clickBtn.classList.toggle("star-glow",player.level>=30)
}

function renderCards(){
  cards.innerHTML=""
  cardData.forEach(c=>{
    if(c.unlock && cardData.find(x=>x.id===c.unlock).level<10)return
    cards.innerHTML+=`
      <div id="card-${c.id}" class="card ${c.rarity}">
        <b>${c.name}</b><br>
        –£—Ä. ${c.level}/${c.maxLevel}<br>
        ‚≠ê ${c.level*c.income}/—Å–µ–∫<br>
        <button onclick="buyCard(${c.id})">
          –ö—É–ø–∏—Ç—å (${Math.floor(c.basePrice*Math.pow(1.5,c.level))})
        </button>
        <div class="error"></div>
      </div>`
  })
}

renderStats()
renderCards()
</script>

</body>
</html>
